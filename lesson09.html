<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 09: èˆ‡é‡åŠ›å°æŠ—â€”â€”é æ‹±åº¦ (Pre-camber) è¨ˆç®—</title>
    <style>
        :root {
            --bg-theory: #f1f5f9; /* é‹¼éµç°èƒŒæ™¯ */
            --bg-field: #fffaf0;
            --bg-tool: #0f172a;
            --text-main: #334155;
            --text-light: #f8fafc;
            --accent-steel: #475569; /* é‹¼æ§‹è‰² */
            --accent-safety: #eab308; /* å·¥å®‰é»ƒ */
            --border-color: #cbd5e1;
            --force-red: #ef4444; /* åŠ›å­¸ç´… */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: "Microsoft JhengHei", "Segoe UI", sans-serif;
            background-color: #f8fafc;
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 98%;
            max-width: 1920px;
            margin: 0 auto;
            padding: 20px 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }

        header {
            grid-column: 1 / -1;
            background: white;
            padding: 2rem;
            border-bottom: 4px solid var(--accent-steel);
            margin-bottom: 10px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        h1 { font-size: 36px; font-weight: 800; color: #1e293b; letter-spacing: -0.025em; }
        h2 { font-size: 28px; margin-top: 1.5rem; margin-bottom: 1rem; border-left: 5px solid; padding-left: 15px; }
        p, li { font-size: 22px; margin-bottom: 1rem; text-align: justify; }

        /* å·¦æ¬„ */
        .theory-column {
            background-color: var(--bg-theory);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .theory-column h2 { border-color: var(--accent-steel); color: #1e293b; }

        /* å³æ¬„ */
        .field-column { display: flex; flex-direction: column; gap: 20px; }
        .field-panel {
            background-color: var(--bg-field);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .field-panel h2 { border-color: var(--accent-safety); color: #b45309; }

        /* å·¥å…·é¢æ¿ */
        .tool-panel {
            background-color: var(--bg-tool);
            color: var(--text-light);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4);
            position: sticky;
            top: 20px;
            border: 1px solid #334155;
        }
        .tool-panel h2 { border-color: var(--accent-safety); color: var(--accent-safety); }

        /* SVG */
        .svg-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        /* æ•¸å­¸å¡ç‰‡ */
        .math-card {
            background: white;
            padding: 20px;
            border-left: 4px solid var(--accent-steel);
            font-family: "Times New Roman", serif;
            font-style: italic;
            font-size: 24px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* è¼¸å…¥ä»‹é¢ */
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        label { display: block; font-size: 14px; margin-bottom: 5px; color: #94a3b8; }
        input {
            width: 100%; padding: 12px; background: #1e293b; border: 1px solid #475569;
            color: white; border-radius: 6px; font-size: 18px; font-family: 'Consolas', monospace;
        }
        input:focus { outline: 2px solid var(--accent-safety); border-color: transparent; }

        .btn {
            background: linear-gradient(135deg, #eab308, #ca8a04);
            color: black; border: none; padding: 15px;
            font-size: 20px; border-radius: 6px; cursor: pointer; width: 100%; font-weight: bold;
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.98); }

        .result-display {
            background: #000; border: 2px solid #334155; padding: 20px;
            border-radius: 8px; margin-top: 20px; font-family: 'Consolas', monospace;
        }
        .res-big { font-size: 32px; font-weight: bold; color: var(--accent-safety); display: block; margin: 10px 0; }
        .res-label { color: #94a3b8; font-size: 14px; }

        @media (max-width: 1200px) {
            .container { grid-template-columns: 1fr; }
            .tool-panel { position: static; }
        }
    </style>
</head>
<body>

<header>
    <h1>Lesson 09: èˆ‡é‡åŠ›å°æŠ— â€” é æ‹±åº¦ (Pre-camber) è¨ˆç®—</h1>
    <p style="color: #64748b; font-size: 18px; margin-bottom: 0;">Road to Expert: ç‚ºäº†è®“æ©‹è®Šç›´ï¼Œä½ å¿…é ˆå…ˆæŠŠå®ƒè“‹å½ã€‚é€™æ˜¯ä¸€å ´èˆ‡åœ°å¿ƒå¼•åŠ›çš„åšå¼ˆã€‚</p>
</header>

<div class="container">
    <div class="theory-column">
        
        <h2>ğŸ¹ ç›´è§€è­¬å–»ï¼šçµäººçš„å¼“</h2>
        <p>æƒ³åƒä¸€å¡Šé•·æœ¨æ¿æ¶åœ¨å…©å¡Šç£šé ­ä¸Šã€‚å¦‚æœä½ ç«™ä¸Šå»ï¼Œæœ¨æ¿æœƒå‘ä¸‹å½æ›²ï¼ˆæ’“åº¦ Deflectionï¼‰ã€‚
        <br>å¦‚æœä½ å¸Œæœ›ç•¶ä½ ç«™ä¸Šå»æ™‚ï¼Œæœ¨æ¿å‰›å¥½æ˜¯<strong>æ°´å¹³</strong>çš„ï¼Œè©²æ€éº¼åšï¼Ÿ</p>
        <p>ä½ å¿…é ˆå…ˆæŠŠæœ¨æ¿åšæˆä¸€æŠŠ<strong>å‘ä¸Šå½çš„å¼“</strong>ã€‚
        <br>é€™å€‹ã€Œå‘ä¸Šå½çš„é‡ã€ï¼Œå°±æ˜¯<strong>é æ‹±åº¦ (Pre-camber)</strong>ã€‚
        <br>ç•¶é‡åŠ›ï¼ˆä½ ï¼‰æŠŠæœ¨æ¿å£“ä¸‹ä¾†æ™‚ï¼Œå‰›å¥½æŠµéŠ·äº†é æ‹±ï¼Œæœ¨æ¿å°±è®Šå¹³äº†ã€‚</p>

        <h2>ğŸ—ï¸ è¦–è¦ºåœ–è§£ï¼šé«˜ç¨‹çš„åŠ æ¸›æ³•</h2>
        <div class="svg-container">
            <svg viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
                <line x1="50" y1="200" x2="750" y2="200" stroke="#94a3b8" stroke-dasharray="5"/>
                <text x="760" y="205" font-size="14" fill="#64748b">è¨­è¨ˆé«˜ç¨‹ (Design)</text>

                <path d="M 50 200 Q 400 300 750 200" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="2"/>
                <text x="400" y="280" text-anchor="middle" fill="#ef4444">â–¼ è‡ªé‡æ’“åº¦ Î´ (Dead Load)</text>

                <path d="M 50 200 Q 400 100 750 200" fill="none" stroke="#eab308" stroke-width="4"/>
                <text x="400" y="120" text-anchor="middle" font-weight="bold" fill="#b45309">â–² é æ‹±åº¦ (Camber)</text>

                <line x1="400" y1="200" x2="400" y2="250" stroke="#ef4444" marker-end="url(#arrow-down)"/>
                <line x1="400" y1="200" x2="400" y2="150" stroke="#eab308" marker-end="url(#arrow-up)"/>

                <defs>
                    <marker id="arrow-down" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" fill="#ef4444">
                        <path d="M0,0 L0,6 L9,3 z" />
                    </marker>
                    <marker id="arrow-up" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" fill="#eab308">
                        <path d="M0,0 L0,6 L9,3 z" />
                    </marker>
                </defs>
            </svg>
            <p style="font-size: 16px; color: #64748b; margin-top: 10px;">åœ–è§£ï¼šç‚ºäº†å°æŠ—ç´…è‰²çš„ä¸‹å‚ï¼Œæˆ‘å€‘å¿…é ˆè£½ä½œé»ƒè‰²çš„é æ‹±ã€‚æœ€çµ‚ç›®æ¨™æ˜¯å…©è€…ç›¸åŠ ç­‰æ–¼ç°è‰²çš„è¨­è¨ˆç·šã€‚</p>
        </div>

        <h2>ğŸ§® ç¡¬æ ¸ç†è«–ï¼šæ”¾æ¨£é«˜ç¨‹å…¬å¼</h2>
        <p>æ¸¬é‡å“¡åœ¨ç¾å ´çµ¦å‡ºçš„æ¨¡ç‰ˆé«˜ç¨‹ï¼Œ<strong>çµ•å°ä¸æ˜¯</strong>è¨­è¨ˆåœ–ä¸Šçš„é«˜ç¨‹ã€‚</p>
        <div class="math-card">
            H_{æ¨¡ç‰ˆ} = H_{è¨­è¨ˆ} + \delta_{DL} + \delta_{SDL} + \delta_{Creep}
        </div>
        <ul>
            <li>$H_{è¨­è¨ˆ}$ï¼šç«£å·¥å¾Œçš„ç›®æ¨™ç·šå‹ã€‚</li>
            <li>$\delta_{DL}$ï¼šå¤§æ¢è‡ªé‡ç”¢ç”Ÿçš„æ’“åº¦ (å‘ä¸‹ç‚ºæ­£ï¼Œéœ€è£œå„Ÿ)ã€‚</li>
            <li>$\delta_{SDL}$ï¼šäºŒæœŸéœè¼‰é‡ (å¦‚è­·æ¬„ã€ACè·¯é¢) ç”¢ç”Ÿçš„æ’“åº¦ã€‚</li>
            <li>$\delta_{Creep}$ï¼šæ··å‡åœŸæ½›è®Šèˆ‡ä¹¾ç¸®é€ æˆçš„é•·æœŸè®Šå½¢ã€‚</li>
        </ul>
        <p><strong>æ³¨æ„ç¬¦è™Ÿé™·é˜±ï¼š</strong><br>
        çµæ§‹æŠ€å¸«çµ¦çš„æ•¸æ“šé€šå¸¸æ˜¯ã€Œæ’“åº¦ (Deflection)ã€ï¼Œæ•¸å€¼æ˜¯å‘ä¸‹çš„ï¼ˆä¾‹å¦‚ -5cmï¼‰ã€‚<br>
        ä½ è¦åšçš„ã€Œé æ‹± (Camber)ã€ï¼Œæ•¸å€¼æ˜¯å‘ä¸Šçš„ï¼ˆä¾‹å¦‚ +5cmï¼‰ã€‚<br>
        <strong>å…¬å¼ç°¡åŒ–ï¼šæ”¾æ¨£å€¼ = è¨­è¨ˆå€¼ - é ä¼°è®Šå½¢é‡ (å«æ­£è² è™Ÿ)</strong></p>
    </div>

    <div class="field-column">
        
        <div class="field-panel">
            <h2>ğŸ‘· ä¸»ä»»çš„å°è¬›æ©Ÿï¼šæ¾†ç½®ä¸­çš„å‹•æ…‹æˆ°å ´</h2>
            
            <h3>1. æ”¯æ’æ²‰é™· (Falsework Settlement)</h3>
            <p>é™¤äº†æ©‹æœƒå½ï¼Œåº•ä¸‹çš„é·¹æ¶ (æ”¯æ’æ¶) ä¹Ÿæœƒè¢«å£“æ‰ï¼
            <br>é€™æ˜¯çµæ§‹æŠ€å¸«ç®—ä¸åˆ°çš„ï¼Œå¿…é ˆç”±å·¥åœ°å¯¦æ¸¬ã€‚
            <br><strong>ç¶“é©—æ³•å‰‡ï¼š</strong> æ¯ä¸€å±¤é·¹æ¶æ¥é ­æœƒåƒæ‰ 1-2mmã€‚å¦‚æœé€™åº§æ©‹ä¸‹æœ‰ 10 å±¤é·¹æ¶ï¼Œä½ å¿…é ˆé¡å¤–æŠŠæ¨¡ç‰ˆæŠ¬é«˜ 1-2 å…¬åˆ†ä¾†æŠµéŠ·é·¹æ¶çš„å£“ç¸®ã€‚</p>

            <h3>2. é‹¼æ§‹ vs. æ··å‡åœŸ</h3>
            <p>â— <strong>é‹¼æ©‹ï¼š</strong> é æ‹±åº¦æ˜¯åœ¨å·¥å» è£¡æŠŠé‹¼æ¿ã€Œåˆ‡å½ã€åšå‡ºä¾†çš„ã€‚ç¾å ´æ¸¬é‡å“¡åªèƒ½æª¢æ ¸ï¼Œå¾ˆé›£èª¿æ•´ã€‚
            <br>â— <strong>æ··å‡åœŸæ©‹ (æ‡¸è‡‚å·¥æ³•/æ”¯æ’å·¥æ³•)ï¼š</strong> é€™æ˜¯æ¸¬é‡å“¡çš„ä¸»å ´ã€‚æ¯ä¸€ç¯€å¡Š (Segment) éƒ½è¦ç®—é æ‹±ã€‚
            <br><strong>é—œéµæ™‚åˆ»ï¼š</strong> æ··å‡åœŸæ¾†ç½®å‰ä¸€åˆ»ï¼Œå¿…é ˆå†æ¬¡è¤‡æ¸¬æ¨¡ç‰ˆé«˜ç¨‹ã€‚å› ç‚ºé‹¼ç­‹ç¶ç´®çš„é‡é‡å¯èƒ½å·²ç¶“è®“æ¨¡ç‰ˆä¸‹æ²‰äº† 5mmï¼Œé€™ 5mm å¿…é ˆã€Œé ‚ã€å›ä¾†ã€‚</p>
        </div>

        <div class="tool-panel">
            <h2>ğŸ†™ äº’å‹•å·¥å…·ï¼šé æ‹±åº¦åˆæˆè¨ˆç®—å™¨</h2>
            <p>è¼¸å…¥è¨­è¨ˆå€¼èˆ‡çµæ§‹æŠ€å¸«æä¾›çš„è®Šå½¢é‡ï¼Œè¨ˆç®—ç¾å ´æ¨¡ç‰ˆæ”¾æ¨£é«˜ç¨‹ã€‚</p>
            
            <div class="input-grid">
                <div>
                    <label>è¨­è¨ˆé«˜ç¨‹ Design Elev (m)</label>
                    <input type="number" id="h_design" value="100.000" step="0.001">
                </div>
                <div>
                    <label>é æœŸç¸½æ²‰é™· Total Deflection (mm)</label>
                    <input type="number" id="deflection" value="-45" placeholder="å‘ä¸‹ç‚ºè²  (e.g., -45)">
                </div>
            </div>

            <div style="margin-bottom: 15px; padding: 10px; background: #1e293b; border-radius: 6px;">
                <label style="color:#cbd5e1; margin-bottom:10px;">å·¥åœ°é¡å¤–è£œå„Ÿ (Field Adjustment)</label>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <div>
                        <label>æ”¯æ’å£“ç¸®é ä¼° (mm)</label>
                        <input type="number" id="settle_scaff" value="10" placeholder="å‘ä¸Šè£œå„Ÿ (æ­£å€¼)">
                    </div>
                    <div>
                        <label>å…¶ä»–é ç•™ (mm)</label>
                        <input type="number" id="settle_other" value="5">
                    </div>
                </div>
            </div>

            <button class="btn" onclick="calcCamber()">ğŸ”¨ è¨ˆç®—æ¨¡ç‰ˆæ”¾æ¨£é«˜ç¨‹</button>

            <div class="result-display" id="result-screen" style="display:none;">
                <div>
                    <span class="res-label">ç¸½é æ‹±è£œå„Ÿé‡ (Total Camber):</span>
                    <span id="res-camber" style="font-size: 24px; color: #eab308; font-weight: bold;">--</span>
                    <span style="color:#64748b;"> mm</span>
                </div>
                <div style="margin-top: 15px; border-top: 1px dashed #333; padding-top: 10px;">
                    <span class="res-label">æ¨¡ç‰ˆæ”¾æ¨£é«˜ç¨‹ (Target Elev):</span>
                    <span class="res-big" id="res-target">--</span>
                </div>
                <p style="font-size:12px; color:#ef4444; margin-top:5px;">*æ³¨æ„ï¼šæ­¤é«˜ç¨‹åŒ…å«ã€ŒæŠµæŠ—é‡åŠ›ã€çš„é ç•™é‡ï¼Œæ¾†ç½®å®Œæˆå¾Œæ‡‰æ²‰é™·è‡³æ¥è¿‘è¨­è¨ˆå€¼ã€‚</p>
            </div>
        </div>

    </div>
</div>

<script>
    function calcCamber() {
        const hDesign = parseFloat(document.getElementById('h_design').value);
        const deflection = parseFloat(document.getElementById('deflection').value); // é æœŸä¸‹æ²‰é‡ (é€šå¸¸ç‚ºè² )
        const scaffold = parseFloat(document.getElementById('settle_scaff').value); // æ”¯æ’è£œå„Ÿ (æ­£)
        const other = parseFloat(document.getElementById('settle_other').value);

        if ([hDesign, deflection, scaffold, other].some(isNaN)) {
            alert("è«‹è¼¸å…¥å®Œæ•´æ•¸æ“šï¼");
            return;
        }

        // é‚è¼¯ï¼š
        // çµæ§‹æœƒä¸‹æ²‰ D (ä¾‹å¦‚ -45mm)
        // æ‰€ä»¥æˆ‘å€‘è¦é å…ˆæŠ¬é«˜ -D (å³ +45mm)
        // æ”¯æ’æœƒè¢«å£“æ‰ S (ä¾‹å¦‚ 10mm)
        // æ‰€ä»¥æˆ‘å€‘è¦å†æŠ¬é«˜ +S (å³ +10mm)
        
        // ç¸½é æ‹±é‡ (Camber) = -(Deflection) + Scaffold + Other
        // å¦‚æœ Deflection è¼¸å…¥çš„æ˜¯è² å€¼ (ä»£è¡¨ä¸‹æ²‰)ï¼Œå‰‡æŠµéŠ·å®ƒéœ€è¦ç”¨ æ¸›è™Ÿ æˆ– çµ•å°å€¼
        // é€™è£¡å‡è¨­ä½¿ç”¨è€…è¼¸å…¥è² å€¼ä»£è¡¨ä¸‹æ²‰
        
        const structCamber = -1 * deflection; // æŠµéŠ·çµæ§‹è®Šå½¢
        const fieldCamber = scaffold + other; // æŠµéŠ·æ–½å·¥è®Šå½¢
        
        const totalCamberMM = structCamber + fieldCamber;
        const totalCamberM = totalCamberMM / 1000;

        const targetElev = hDesign + totalCamberM;

        // é¡¯ç¤ºçµæœ
        const sign = totalCamberMM >= 0 ? "+" : "";
        document.getElementById('res-camber').innerText = sign + totalCamberMM.toFixed(1);
        document.getElementById('res-target').innerText = targetElev.toFixed(4);
        
        document.getElementById('result-screen').style.display = 'block';
    }
</script>

</body>
</html>