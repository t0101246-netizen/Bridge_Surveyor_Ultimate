<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 03: é‡åŠ›çš„æŒ‡å¼•â€”â€”æ°´æº–å„€åŸç†èˆ‡æª¢æ ¡</title>
    <style>
        :root {
            --bg-theory: #f0fdf4; /* æ·ºç¶ èƒŒæ™¯ï¼Œè±¡å¾µå¤§åœ°èˆ‡æ°´å¹³ */
            --bg-field: #fffaf0;
            --bg-tool: #1a202c;
            --text-main: #334155;
            --text-light: #f8fafc;
            --accent-teal: #0d9488; /* æ°´æº–æ¸¬é‡çš„ä¸»é¡Œè‰² */
            --accent-orange: #f97316;
            --border-color: #cbd5e1;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: "Microsoft JhengHei", "Segoe UI", sans-serif;
            background-color: #f1f5f9;
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 98%;
            max-width: 1920px;
            margin: 0 auto;
            padding: 20px 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }

        header {
            grid-column: 1 / -1;
            background: white;
            padding: 2rem;
            border-bottom: 4px solid var(--accent-teal);
            margin-bottom: 10px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        h1 { font-size: 36px; font-weight: 800; color: #1e293b; letter-spacing: -0.025em; }
        h2 { font-size: 28px; margin-top: 1.5rem; margin-bottom: 1rem; border-left: 5px solid; padding-left: 15px; }
        h3 { font-size: 24px; margin-top: 1rem; color: #475569; }
        p, li { font-size: 22px; margin-bottom: 1rem; text-align: justify; }

        /* å·¦æ¬„ */
        .theory-column {
            background-color: var(--bg-theory);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .theory-column h2 { border-color: var(--accent-teal); color: #0f766e; }

        /* å³æ¬„ */
        .field-column { display: flex; flex-direction: column; gap: 20px; }
        .field-panel {
            background-color: var(--bg-field);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .field-panel h2 { border-color: var(--accent-orange); color: #c2410c; }

        /* å·¥å…·é¢æ¿ */
        .tool-panel {
            background-color: var(--bg-tool);
            color: var(--text-light);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 20px;
        }
        .tool-panel h2 { border-color: var(--accent-teal); color: #2dd4bf; }

        /* SVG */
        .svg-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        /* æ•¸å­¸å¡ç‰‡ */
        .math-card {
            background: white;
            padding: 20px;
            border-left: 4px solid var(--accent-teal);
            font-family: "Times New Roman", serif;
            font-style: italic;
            font-size: 24px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* Input Styles */
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .input-group { background: #334155; padding: 15px; border-radius: 8px; }
        .input-group h4 { color: #94a3b8; margin-bottom: 10px; font-size: 16px; text-transform: uppercase; letter-spacing: 1px; }
        label { display: block; font-size: 14px; margin-bottom: 5px; color: #cbd5e1; }
        input[type="number"] {
            width: 100%; padding: 10px; background: #0f172a; border: 1px solid #475569;
            color: white; border-radius: 4px; font-size: 18px; font-family: 'Consolas', monospace;
        }
        input:focus { outline: 2px solid var(--accent-teal); border-color: transparent; }

        .btn {
            background: var(--accent-teal); color: white; border: none; padding: 15px;
            font-size: 20px; border-radius: 6px; cursor: pointer; width: 100%; font-weight: bold;
            transition: background 0.2s;
        }
        .btn:hover { background: #0f766e; }

        .result-box {
            background: #0f172a; padding: 20px; border-radius: 8px; margin-top: 20px;
            font-family: "Consolas", monospace; border: 1px solid #334155;
        }
        .status-pass { color: #4ade80; font-weight: bold; }
        .status-fail { color: #f87171; font-weight: bold; }

        @media (max-width: 1200px) {
            .container { grid-template-columns: 1fr; }
            .tool-panel { position: static; }
        }
    </style>
</head>
<body>

<header>
    <h1>Lesson 03: é‡åŠ›çš„æŒ‡å¼• â€” æ°´æº–å„€åŸç†èˆ‡æª¢æ ¡</h1>
    <p style="color: #64748b; font-size: 18px; margin-bottom: 0;">Road to Expert: æ°´æœƒå°‹æ‰¾å¹³é¢ï¼Œä½†å„€å™¨æœƒèªªè¬Šã€‚å¦‚æœä¸éš¨æ™‚æª¢æ ¸ï¼Œæ‚¨çš„æ©‹å°±æœƒè“‹æˆæ–œå¡ã€‚</p>
</header>

<div class="container">
    <div class="theory-column">
        
        <h2>ğŸŒŠ ç›´è§€è­¬å–»ï¼šå¹³éœçš„æ¹–é¢</h2>
        <p>æ°´æº–æ¸¬é‡çš„åŸç†å¾ˆç°¡å–®ï¼š<strong>æ°´éœæ­¢æ™‚ï¼Œè¡¨é¢æ°¸é å‚ç›´æ–¼é‡åŠ›ã€‚</strong> é€™å°±æ˜¯ã€Œç­‰ä½é¢ã€(Equipotential Surface)ã€‚</p>
        <p>æ°´æº–å„€å°±åƒä¸€å€‹é«˜ç§‘æŠ€çš„ã€Œæ°´æ¼‚ã€ã€‚æˆ‘å€‘è©¦åœ–å»ºç«‹ä¸€æ¢èˆ‡æ¹–é¢å¹³è¡Œçš„ã€Œè¦–ç·šã€ã€‚<br>
        ä½†å•é¡Œä¾†äº†ï¼š<strong>å¦‚æœä½ çš„ã€Œè¦–ç·šã€æ˜¯æ­ªçš„å‘¢ï¼Ÿ</strong> å°±åƒä¸€æŠŠå½æ›²çš„å°ºï¼Œä½ ä»¥ç‚ºä½ è®€åˆ°çš„æ˜¯ 1.500mï¼Œå¯¦éš›å¯èƒ½æ˜¯ 1.495mã€‚é€™å€‹ã€Œæ­ªã€å°±æ˜¯<strong>è¦–æº–è»¸èª¤å·® (Collimation Error)</strong>ã€‚</p>

        <h2>ğŸ‘ï¸ è¦–è¦ºåœ–è§£ï¼šå…©æ­æª¢æ ¡åŸç† (Two-Peg Test)</h2>
        <div class="svg-container">
            <svg viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
                <line x1="50" y1="300" x2="750" y2="300" stroke="#333" stroke-width="2"/>
                
                <g transform="translate(100, 300)">
                    <rect x="-5" y="-150" width="10" height="150" fill="#f1f5f9" stroke="#333"/>
                    <text x="0" y="20" text-anchor="middle" font-weight="bold">æ¨™å°º A</text>
                </g>
                <g transform="translate(700, 300)">
                    <rect x="-5" y="-180" width="10" height="180" fill="#f1f5f9" stroke="#333"/>
                    <text x="0" y="20" text-anchor="middle" font-weight="bold">æ¨™å°º B</text>
                </g>

                <g transform="translate(400, 200)">
                    <circle cx="0" cy="0" r="5" fill="#0d9488"/>
                    <text x="0" y="-20" text-anchor="middle" font-size="14" fill="#0d9488">æ¸¬ç«™ 1 (ç½®ä¸­)</text>
                    <line x1="-300" y1="0" x2="300" y2="0" stroke="#94a3b8" stroke-dasharray="4"/>
                    <line x1="-300" y1="-10" x2="300" y2="-10" stroke="#ef4444" stroke-width="2"/>
                    <text x="0" y="-40" text-anchor="middle" font-size="12" fill="#ef4444">è¦–ç·šé›–æ­ªï¼Œä½† Aã€B å…©ç«¯æ­ªçš„ä¸€æ¨£å¤š â†’ é«˜ç¨‹å·®æ­£ç¢º</text>
                </g>

                <g transform="translate(600, 220)">
                    <circle cx="0" cy="0" r="5" fill="#f97316"/>
                    <text x="0" y="30" text-anchor="middle" font-size="14" fill="#f97316">æ¸¬ç«™ 2 (è¿‘ B)</text>
                    <line x1="-500" y1="-25" x2="100" y2="5" stroke="#f97316" stroke-width="2" stroke-dasharray="2"/>
                    <text x="-250" y="-30" text-anchor="middle" font-size="12" fill="#f97316">è·é›¢é•·ï¼Œèª¤å·®æ”¾å¤§</text>
                    <text x="50" y="0" text-anchor="middle" font-size="12" fill="#f97316">è·é›¢çŸ­ï¼Œèª¤å·®å°</text>
                </g>
            </svg>
            <p style="font-size: 16px; color: #64748b; margin-top: 10px;">åœ–è§£ï¼šç½®ä¸­æ¸¬é‡æ™‚ï¼Œè¦–æº–è»¸èª¤å·® (ç´…è‰²) åœ¨å…©ç«¯ç›¸äº’æŠµéŠ·ã€‚ä¸€æ—¦é è¿‘ä¸€ç«¯æ¸¬é‡ (æ©˜è‰²)ï¼Œèª¤å·®å°±æœƒåŸå½¢ç•¢éœ²ã€‚</p>
        </div>

        <h2>ğŸ“ ç¡¬æ ¸ç†è«–ï¼šèª¤å·®æ•¸å­¸æ¨¡å‹</h2>
        <p>å‡è¨­è¦–æº–è»¸å‘ä¸Šåäº† $\alpha$ è§’ã€‚è®€æ•¸ $r$ èˆ‡è·é›¢ $D$ çš„é—œä¿‚ç‚ºï¼š</p>
        <div class="math-card">
            r_{measured} = r_{true} + D \cdot \tan(\alpha)
        </div>
        <p><strong>é«˜ç¨‹å·®å…¬å¼ï¼š</strong> $\Delta H = r_A - r_B$<br>
        å¸¶å…¥èª¤å·®å¾Œï¼š
        $\Delta H_{meas} = (r_A^{true} + D_A \tan \alpha) - (r_B^{true} + D_B \tan \alpha)$<br>
        $\Delta H_{meas} = \Delta H_{true} + (D_A - D_B) \tan \alpha$</p>

        <p><strong>é»ƒé‡‘æ³•å‰‡ï¼š</strong> ç•¶ $D_A = D_B$ (å‰å¾Œè¦–ç­‰è·) æ™‚ï¼Œ$(D_A - D_B) = 0$ï¼Œèª¤å·®é …ç›´æ¥æ¶ˆå¤±ï¼é€™å°±æ˜¯ç‚ºä»€éº¼åœ¨åšæ°´æº–æ¸¬é‡æ™‚ï¼Œæˆ‘å€‘æ‹šäº†å‘½ä¹Ÿè¦ä¿æŒå„€å™¨åœ¨ä¸­é–“ã€‚</p>
    </div>

    <div class="field-column">
        
        <div class="field-panel">
            <h2>ğŸ‘· ä¸»ä»»çš„å°è¬›æ©Ÿï¼šç¾å ´åªæœ‰ä¸€æ¬¡æ©Ÿæœƒ</h2>
            
            <h3>1. å…©æ­æª¢æ ¡ (Two-Peg Test) å¯¦ä½œæµç¨‹</h3>
            <p>ä¸è¦å·æ‡¶ã€‚æ¯å¤©é–‹å·¥å‰ï¼ŒèŠ± 10 åˆ†é˜åšé€™å€‹æª¢æŸ¥ï¼š</p>
            <ol>
                <li><strong>å®šæ¨ï¼š</strong> åœ¨å¹³åœ°æ‰“å…©æ”¯æ¨™å°º Aã€Bï¼Œç›¸è·ç´„ 60mã€‚</li>
                <li><strong>ç½®ä¸­æ¸¬ï¼š</strong> å„€å™¨æ¶åœ¨æ­£ä¸­é–“ (30mè™•)ã€‚è®€å– a1, b1ã€‚è¨ˆç®—é«˜ç¨‹å·® $\Delta H = a1 - b1$ã€‚(é€™æ˜¯çœŸå€¼ï¼)</li>
                <li><strong>è¿‘æ¸¬ï¼š</strong> å„€å™¨ç§»åˆ° B å°ºé™„è¿‘ (ç´„ 3-5m)ã€‚è®€å– a2, b2ã€‚</li>
                <li><strong>æª¢æ ¸ï¼š</strong> ç”¨ $\Delta H$ æ¨ç®— a2 çš„ã€Œç†è«–è®€æ•¸ã€ã€‚å¦‚æœå¯¦éš› a2 å·®å¤ªå¤šï¼Œå„€å™¨å°±è¦é€ä¿®æˆ–ç¾å ´æ ¡æ­£ã€‚</li>
            </ol>

            <h3>2. åœ“æ°£æ³¡ vs. ç®¡æ°£æ³¡</h3>
            <p>å¾ˆå¤šæ–°æ‰‹åªçœ‹åœ“æ°£æ³¡å±…ä¸­å°±é–‹å§‹æ¸¬ã€‚<strong>éŒ¯ï¼</strong> è‡ªå‹•æ°´æº–å„€ (Auto Level) é›–ç„¶æœ‰è£œå„Ÿå™¨ï¼Œä½†è£œå„Ÿç¯„åœå¾ˆå°ã€‚å¦‚æœåœ“æ°£æ³¡æ²’ç²¾ç¢ºå±…ä¸­ï¼Œè£œå„Ÿå™¨æœƒã€Œå¡ä½ã€(Sticky)ï¼Œå°è‡´è®€æ•¸å…¨éŒ¯ã€‚
            <br><strong>è€é³¥æŠ€å·§ï¼š</strong> æ¯æ¬¡è®€æ•¸å‰ï¼Œç”¨æ‰‹æŒ‡è¼•è¼•æ•²ä¸€ä¸‹å„€å™¨å¤–æ®¼ã€‚é€™èƒ½éœ‡å‹•è£œå„Ÿå™¨ï¼Œç¢ºèªå®ƒæ‡¸åŠæ­£å¸¸ã€‚</p>
        </div>

        <div class="tool-panel">
            <h2>ğŸ› ï¸ äº’å‹•å·¥å…·ï¼šæ°´æº–å„€å¥åº·è¨ºæ–·æ›¸</h2>
            <p>è¼¸å…¥å…©æ¬¡è¨­ç«™çš„è®€æ•¸ï¼Œè‡ªå‹•è¨ˆç®—è¦–æº–è»¸èª¤å·®ä¸¦åˆ¤å®šæ˜¯å¦åˆæ ¼ã€‚</p>
            
            <div class="input-group">
                <h4>Step 1: ç½®ä¸­æ¸¬é‡ (Midpoint)</h4>
                <div class="input-grid">
                    <div>
                        <label>å¾Œè¦–æ¨™å°º A è®€æ•¸ (a1)</label>
                        <input type="number" id="a1" placeholder="1.500" step="0.001">
                    </div>
                    <div>
                        <label>å‰è¦–æ¨™å°º B è®€æ•¸ (b1)</label>
                        <input type="number" id="b1" placeholder="1.450" step="0.001">
                    </div>
                </div>
            </div>

            <div class="input-group" style="margin-top: 15px;">
                <h4>Step 2: é è¿‘ B æ¨™å°ºæ¸¬é‡ (Near B)</h4>
                <div class="input-grid">
                    <div>
                        <label>é ç«¯æ¨™å°º A è®€æ•¸ (a2)</label>
                        <input type="number" id="a2" placeholder="1.520" step="0.001">
                    </div>
                    <div>
                        <label>è¿‘ç«¯æ¨™å°º B è®€æ•¸ (b2)</label>
                        <input type="number" id="b2" placeholder="1.465" step="0.001">
                    </div>
                </div>
            </div>

            <div style="margin-top: 15px;">
                <label>å…©æ¨™å°ºé–“è· (m)</label>
                <input type="number" id="dist" value="60" style="background:#1e293b;">
            </div>

            <button class="btn" onclick="calcTwoPeg()" style="margin-top: 20px;">é–‹å§‹è¨ºæ–·</button>

            <div class="result-box" id="result-area" style="display:none;">
                <p>çœŸå¯¦é«˜ç¨‹å·® (True Î”H): <span id="true-dh" style="color:var(--accent-teal)">--</span> m</p>
                <p>è¿‘æ¸¬é«˜ç¨‹å·® (Meas Î”H): <span id="meas-dh" style="color:var(--accent-orange)">--</span> m</p>
                <hr style="border-color:#334155; margin:10px 0;">
                <p>èª¤å·®å€¼ (Error): <span id="error-val">--</span> mm</p>
                <p>åˆ¤å®šçµæœ: <span id="status-text">--</span></p>
                <p style="font-size:12px; color:#94a3b8; margin-top:5px;">*å®¹è¨±èª¤å·®ä»¥ Â±3mm/60m ç‚ºé€šç”¨æ¨™æº–</p>
            </div>
        </div>

    </div>
</div>

<script>
    function calcTwoPeg() {
        // ç²å–è¼¸å…¥
        const a1 = parseFloat(document.getElementById('a1').value);
        const b1 = parseFloat(document.getElementById('b1').value);
        const a2 = parseFloat(document.getElementById('a2').value);
        const b2 = parseFloat(document.getElementById('b2').value);
        const D = parseFloat(document.getElementById('dist').value);

        if (isNaN(a1) || isNaN(b1) || isNaN(a2) || isNaN(b2)) {
            alert("è«‹è¼¸å…¥å®Œæ•´çš„è®€æ•¸ï¼");
            return;
        }

        // 1. è¨ˆç®—çœŸé«˜ç¨‹å·® (Step 1 ç½®ä¸­æ¸¬é‡ï¼Œè¦–ç‚ºç„¡èª¤å·®)
        // Î”H = å¾Œè¦– - å‰è¦– = a1 - b1
        const trueDH = a1 - b1;

        // 2. è¨ˆç®—ç¬¬äºŒæ¬¡æ¸¬é‡çš„é«˜ç¨‹å·®
        const measDH = a2 - b2;

        // 3. è¨ˆç®—èª¤å·®
        // ç†è«–ä¸Š a2 æ‡‰è©²ç­‰æ–¼ b2 + trueDH
        const expected_a2 = b2 + trueDH;
        const error = a2 - expected_a2; // é€™æ˜¯ç¸½èª¤å·®é‡ (åœ¨è·é›¢ D ä¸Šçš„åå·®)
        
        // æ›ç®—æˆ mm
        const errorMM = error * 1000;

        // åˆ¤å®š (å‡è¨­æ¨™æº–ç‚º 3mm / 60m)
        // åš´æ ¼ä¾†èªªæ‡‰è©²è¨ˆç®—è§’åº¦ iï¼Œä½†ç¾å ´é€šå¸¸ç›´æ¥çœ‹ç¸½èª¤å·®é‡
        const limit = 3.0; 
        const isPass = Math.abs(errorMM) <= limit;

        // é¡¯ç¤ºçµæœ
        document.getElementById('true-dh').innerText = trueDH.toFixed(4);
        document.getElementById('meas-dh').innerText = measDH.toFixed(4);
        document.getElementById('error-val').innerText = (errorMM > 0 ? "+" : "") + errorMM.toFixed(2);
        
        const statusElem = document.getElementById('status-text');
        if (isPass) {
            statusElem.innerHTML = "âœ… åˆæ ¼ (PASS)";
            statusElem.className = "status-pass";
        } else {
            statusElem.innerHTML = "âš ï¸ ä¸åˆæ ¼ (FAIL) - éœ€æ ¡æ­£";
            statusElem.className = "status-fail";
        }

        document.getElementById('result-area').style.display = 'block';
    }
</script>
<!-- NAV SCRIPT START -->
<script>
(function(){
    // è‡ªå‹•ç”Ÿæˆå°è¦½æŒ‰éˆ•
    const total=13; // ç¸½èª²æ•¸
    const page=location.pathname.split("/").pop();
    const num=parseInt(page.match(/lesson(\d+)\.html/i)?.[1]||0);
    if(!num)return;
    
    const prev=num>1?`lesson${String(num-1).padStart(2,'0')}.html`:'index.html';
    const next=num<total?`lesson${String(num+1).padStart(2,'0')}.html`:'#';
    const bg='#0f172a'; const color='white';

    const div=document.createElement('div');
    div.style.cssText="position:fixed;bottom:20px;right:20px;display:flex;gap:10px;z-index:9999;font-family:Consolas,monospace;";
    div.innerHTML=`
        <a href="${prev}" style="background:${bg};color:${color};padding:10px 20px;text-decoration:none;border-radius:30px;box-shadow:0 4px 10px rgba(0,0,0,0.3);font-weight:bold;">â† PREV</a>
        <a href="index.html" style="background:${bg};color:${color};padding:10px 20px;text-decoration:none;border-radius:30px;box-shadow:0 4px 10px rgba(0,0,0,0.3);font-weight:bold;">MENU</a>
        <a href="${next}" style="background:${bg};color:${color};padding:10px 20px;text-decoration:none;border-radius:30px;box-shadow:0 4px 10px rgba(0,0,0,0.3);font-weight:bold;opacity:${num>=total?0.5:1};pointer-events:${num>=total?'none':'auto'}">NEXT â†’</a>
    `;
    document.body.appendChild(div);
})();
</script>
<!-- NAV SCRIPT END -->
</body>

</html>
